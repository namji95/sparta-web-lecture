<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Fetch 시작하기</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      function hey() {
        let url = "http://spartacodingclub.shop/sparta_api/seoulair";
        // fetch(url)
        //   // 이 URL로 웹 통신을 요청한다. 괄호 안에 다른 것이 없다면 GET!
        //   .then((res) => res.json())
        //   // 통신 요청을 받은 데이터는 res라는 이름으로 JSON화 한다
        //   .then((data) => {
        //     console.log(data); // 개발자 도구에 찍어보기
        //   }); // JSON 형태로 바뀐 데이터를 data라는 이름으로 붙여 사용한다
        // fetch(url) // 기본 요청(GET)
        //   .then((res) => res.json()) // 요청해서 받은 데이터를 JSON화
        //   .then((data) => {
        //     // JSON화 한 데이터를 다시 data로 이름짓기
        //     let rows = data["RealtimeCityAir"]["row"];
        //     rows.forEach((a) => {
        //       // 미세먼지 데이터 리스트의 길이만큼 반복해서 하나씩 개발자 도구에서 보기
        //       console.log(a);
        //     });
        //   });
        fetch(url) // 기본 요청(GET)
          .then((res) => res.json()) // 요청해서 받은 데이터를 JSON화
          .then((data) => {
            // JSON화 한 데이터를 다시 data로 이름짓기
            let rows = data["RealtimeCityAir"]["row"];
            rows.forEach((a) => {
              // 미세먼지 데이터 리스트의 길이만큼 반복해서 하나씩 개발자 도구에서 보기
              // 구의 이름, 미세먼지 수치 값을 개발자 도구에서 찍어보기
              console.log(a["MSRSTE_NM"], a["IDEX_MVL"]);
            });
          });
      }
    </script>
  </head>

  <body>
    <button onclick="hey()">fetch 연습!</button>
  </body>
</html>
